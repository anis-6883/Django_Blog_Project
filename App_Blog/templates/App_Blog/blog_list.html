{% extends 'App_Blog/base.html' %}
{% block title %}-Home{% endblock title %}
{% block content %}

{% for blog in blogs %}

<article class="media content-section">
    <img class="rounded-circle article-img" src="{{ blog.author.user_profile.image.url }}" alt="">
    <div class="media-body">
        <div class="article-metadata">
            <b>{{ blog.author }}</b><br>
            <small class="text-muted">{{ blog.publish_date|date:"F d, Y" }}</small><br>
            <h6 class="mt-2">{{ blog.liked_blog.count }} Like{{ blog.liked_blog.count|pluralize }}</h6>
            <h6>{{blog.blog_comment.count}} Comment{{blog.blog_comment.count|pluralize}}</h6>

        </div>
        <h2><a class="article-title" href="{% url 'App_Blog:blog-details' slug=blog.slug %}">{{ blog.title }}</a></h2>
        <div class="row">
            <div class="col-sm-4">
                <img class="blog-img" src="{{ blog.blog_image.url }}" alt="">
            </div>
            <div class="col-sm-8">
                <p class="article-content">{{ blog.content|linebreaks|truncatewords:30 }}</p>
            </div>
        </div>
    </div>
</article>
{% endfor %}

{% if is_paginated %}

        {% if page_obj.has_previous %}

            <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>

        {% endif %}

        {% for num in page_obj.paginator.page_range %}

            {% if page_obj.number == num %}
                <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>

            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>

            {% endif %}

        {% endfor %}

        {% if page_obj.has_next %}

            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>

        {% endif %}

    {% endif %}

{% endblock content %}
